---
title: systemd hardening
slug: systemd-hardening
description: >-
  Run Vikunja as a non-root user with systemd for additional security,
  and optionally apply sandboxing to further limit access.
---

When [installing](/docs/installing) Vikunja on a systemd-based system, the service may be configured to run as `root`. It is generally a good idea to run services with the least amount of privileges they need. This guide shows how to run Vikunja as its own dedicated user and how to optionally add extra security restrictions using systemd.

## Create a dedicated user

Create a system account for Vikunja that will not be able to log in interactively and will only be used to run the service:

```bash
sudo useradd --system --home /var/lib/vikunja --shell /usr/sbin/nologin vikunja
```

Next, ensure Vikunja has its own directories for data and configuration, and that the new user owns them:

```bash
sudo mkdir -p /var/lib/vikunja
sudo chown -R vikunja:vikunja /var/lib/vikunja
sudo chmod -R o+r /etc/vikunja
```

If you are logging to files, create a log directory and update the paths in your `config.yml` under the [log section](https://vikunja.io/docs/config-options/#0--log).

```bash
sudo mkdir -p /var/log/vikunja
sudo chown -R vikunja:vikunja /var/log/vikunja
```

## Modify the systemd service unit

The package already provides a service unit (/lib/systemd/system/vikunja.service). Modify it using:

```bash
sudo systemctl edit vikunja.service
```

Apply the following changes:

* Run Vikunja as the dedicated vikunja user
* Use `/var/lib/vikunja` as the working directory
* Explicitly specify the config file when starting the binary
* Add basic systemd sandboxing options to limit host access

```config
[Service]
User=vikunja
Group=vikunja
WorkingDirectory=/var/lib/vikunja
ExecStart=/usr/local/bin/vikunja
Environment=VIKUNJA_CONFIG=/etc/vikunja/config.yml
Restart=always
RestartSec=3
LimitNOFILE=65536
NoNewPrivileges=true
ProtectHome=true
PrivateTmp=true
ProtectSystem=strict
ReadWritePaths=/var/lib/vikunja /etc/vikunja
```

Also include your configured [files](/docs/config-options/#0--files) and log directory in `ReadWritePaths` and ensure the `vikunja` user has the correct permissions.

## Reload systemd and restart Vikunja

```bash
sudo systemctl daemon-reexec
sudo systemctl restart vikunja.service
```

## Verify the service

Check that the service is running under the correct user:

```bash
ps -u vikunja -f
```

Additionally, check the logs for errors:

```bash
journalctl -u vikunja.service -e
```
